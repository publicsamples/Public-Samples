ShortPWM<script src="https://unpkg.com/tone"></script>
<script src="https://unpkg.com/@tonejs/ui"></script>
<style>
	
	body {
      width: 100%;
					min-width: 600px;
					max-width: 400px;
					margin: 0px 0px 0px 0px auto 0px;
					text-align: left;
}

</style>

<body>
<div>
	
	  </div>
			<tone-content>
            <tone-transport></tone-transport>
			<tone-step-sequencer id="seq1"></tone-step-sequencer>
			<tone-step-sequencer id="seq2"></tone-step-sequencer>
			<tone-step-sequencer id="seq3"></tone-step-sequencer>
				<tone-auto-filter collapsed frequency id="frequency"></tone-auto-filter>
				<tone-ping-pong-delay collapsed></tone-ping-pong-delay>
				<tone-freeverb collapsed=""></tone-freeverb>
			</tone-content>
		</tone-example>

		<script type="text/javascript">
			
			var eq = new Tone.EQ3().toMaster({
					})
				
					
				
					var verb = new Tone.Freeverb({
										"frequency" : "8n",
										"feedback" : 0.6,
										"wet" : 0.0
									}).connect(eq);	
									
									//the feedback delay
									var feedbackDelay = new Tone.PingPongDelay({
										"frequency" : "8n",
										"feedback" : 0.6,
										"wet" : 0.0
									}).connect(verb);		
				
					var filter = new Tone.AutoFilter({
								"frequency" : 100,
								"wet" : 0.0,
						"frequency" : "8n"
							}).connect(feedbackDelay).start();
				

				
	
	

		
			var keys = new Tone.Players({
"1" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE25.mp3",
"2" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE24.mp3",
"3" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE23.mp3",
"4" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE22.mp3",
"5" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE21.mp3",
"6" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE20.mp3",
"7" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE19.mp3",
"8" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE18.mp3",
"9" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE17.mp3",
"10" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE16.mp3",
"11" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE15.mp3",
"12" : "https://raw.githubusercontent.com/publicsamples/Roland-SH-2/master/MP3/ShortPWM/FILE14.mp3"
	}, {
				"volume" : 00,
				"fadeOut" : "8512n",
				}).connect(filter);
				
			
				//the notes
				var noteNames = ["1", "2", "3", "4"];
				var noteNames2 = ["5", "6", "7", "8"];	
				var noteNames3 = ["9", "10", "11", "12"];		
				
		
				var loop = new Tone.Sequence(function(time, col){
					var column = document.querySelector("#seq1").currentColumn;
					column.forEach(function(val, i){
						if (val){
							//slightly randomized velocities
							var vel = Math.random() * 0.5 + 0.5;
							keys.get(noteNames[i]).start(time, 0, "16n", 560, vel);
						}
					});
					//set the columne on the correct draw frame
					Tone.Draw.schedule(function(){
						document.querySelector("#seq1").setAttribute("highlight", col);
					}, time);
				}, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "16n").start(0);
		
			

				var loop2 = new Tone.Sequence(function(time, col){
					var column2 = document.querySelector("#seq2").currentColumn;
					column2.forEach(function(val, i){
						if (val){
							//slightly randomized velocities
							var vel2 = Math.random() * 0.5 + 0.5;
							keys.get(noteNames2[i]).start(time, 0, "16n", 560, vel2);
						}
					});
					//set the columne on the correct draw frame
					Tone.Draw.schedule(function(){
						document.querySelector("#seq2").setAttribute("highlight", col);
					}, time);
				}, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "16n").start(0);
		
		
		
					var loop3 = new Tone.Sequence(function(time, col){
						var column3 = document.querySelector("#seq3").currentColumn;
						column3.forEach(function(val, i){
							if (val){
								//slightly randomized velocities
								var vel3 = Math.random() * 0.5 + 0.5;
								keys.get(noteNames3[i]).start(time, 0, "16n", 560, vel3);
							}
						});
						//set the columne on the correct draw frame
						Tone.Draw.schedule(function(){
							document.querySelector("#seq3").setAttribute("highlight", col);
						}, time);
					}, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "16n").start(0);
			
		
		
			
				//bind the interface
				document.querySelector("tone-auto-filter").bind(filter);
				document.querySelector("tone-transport").bind(Tone.Transport);
				document.querySelector("tone-freeverb").bind(verb);
		document.querySelector("tone-ping-pong-delay").bind(feedbackDelay);

				Tone.Transport.on("stop", () => {
					setTimeout(() => {
						document.querySelector("#seq1").setAttribute("highlight", "-1");
						document.querySelector("#seq2").setAttribute("highlight", "-1");
						document.querySelector("#seq3").setAttribute("highlight", "-1");
					}, 100);
				
				});
		
			
		</script>
    
</body>
</html>
	
