<meta charset="utf-8">
<title>Your page title here :)</title>
<meta name="description" content="">
<meta name="author" content="">

<!-- Mobile Specific Metas
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- FONT
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

<!-- CSS
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/style.css">

<!-- Ext. Script
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<script src="https://unpkg.com/tone"></script>
<script src="https://unpkg.com/@tonejs/ui"></script>

<script type="text/javascript" src="external-js/NexusUI.js"></script>
<script type="text/javascript" src="external-js/audiokeys.js"></script>

<script type="text/javascript">

// ********* Tone.js stuff

var soundFiles = ["1.mp3", "2.mp3", "3.mp3"];
var toneBuffers = new Array();

function setBuffer(buffername)
{
player.buffer = toneBuffers[buffername];
loopDuration = player.buffer.duration;
looprange.set({
start: looprange.val.start,
stop: looprange.val.stop
}, true);

}

var player = new Tone.Player(toneBuffers).toMaster();
player.loop = true;
player.loopStart = 0.0; 
player.loopEnd = 1.0;	

window.addEventListener('load', function() {
for (var i = 0; i < soundFiles.length; i++)
{
toneBuffers[soundFiles[i]] = new Tone.Buffer("audiofiles/" + soundFiles[i]);
}
Tone.Buffer.onload = function(){
setBuffer("1.mp3");
document.getElementById("playtext").innerHTML = "<p>ready</p>";
};				
}, false);		

// ********* NexusUI stuff

var loopsample = new Nexus.Select('#loopsample',{
'size': [100,30],
'options': ['1.mp3','2.mp3','3.mp3']
})
loopsample.on('*', function(data) {
setBuffer(data.text);
})

</script>

</head>
<body>

<h3>Sources - Player II (Looper)</h3>

<div id="playtext"><p>please wait while the sounds load...</p></div>

<div nexus-ui="select" id="select"></div>
<canvas nx="toggle" id="toggleloop"></canvas>
<canvas nx="range" id="looprange" style="width:400px; height:50px;"></canvas>
<div id="loopsample"></div>

</body>
</html>

</head>

</html>