<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="../css/style.css" />
	<script src="../external-js/Tone.js" type="text/javascript">
	</script>
	<script src="../external-js/audiokeys.js" type="text/javascript">
	</script>
	<script src="../external-js/tonejs-ui.js" type="text/javascript">
	</script>
	<script src="../external-js/NexusUI.js" type="text/javascript">
	</script>
	<script src="https://cdn.jsdelivr.net/npm/webmidi">
	</script>
	<title>Roland Jupiter 4</title>
</head>
<body onload="move(); loadJS('../presets/jp4/file1.js');">
	<div class="content">
		<div class="block block-layout-builder block-field-blocknodesamplelibrarygridbody" data-layout-content-preview-placeholder-label="&quot;Body&quot; field">
			<div class="block block-layout-builder block-field-blocknodesamplelibrarygridfield-preset" data-layout-content-preview-placeholder-label="&quot;Demo Player&quot; field">
				<h2 class="page_title">Roland Jupiter 4</h2>
				<div class="grid-patch">
					<div class="grid-item2">
						<div class="dropdown">
							<button class="dropbtn">Patches</button>
							<div class="dropdown-content">
						           <p>Pads</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file1.js');">Celts</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file2.js');">Greeks</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file3.js');">Jelly</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file4.js');">Lombard</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file5.js');">Noisy</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file6.js');">Normans</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file7.js');">Picts</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file8.js');">Potato</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file9.js');">PWMLady</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file10.js');">Romans</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file11.js');">Saxons</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file12.js');">Shimmer</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file13.js');">Singing</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file14.js');">Unison</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file15.js');">Vikings</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Pads/file16.js');">Visigoth</p>
			
									<p>Misc</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file1.js');">Babybrass</p>
									<p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file2.js');">EagerString</p>
						            <p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file3.js');">EvilBrain140</p>
						            <p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file4.js');">FakeFlute</p>
						            <p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file5.js');">HiBlip</p>
						           <p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file6.js');">PreciousLittleAngels</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file7.js');">Princess</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file8.js');">PWMStrings</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Misc/file9.js');">ShortSweet</p>
			
			
			
								<p>Lead</p>
		
								 <p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file1.js');">BlipLead</p>
						         <p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file2.js');">BoldLead</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file3.js');">CatBrush</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file6.js');">Chunky</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file7.js');">GoneAwayForever</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file8.js');">HighRise</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file9.js');">JPlead</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file10.js');">NoisyLead</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file11.js');">SadWow</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file12.js');">Sticky</p>
							<p onclick="move(); stop(); loadJS('../presets/jp4/Lead/file13.js');">ThickSwishy</p>
	
<p>Keys</p>	
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file1.js');">ElectronicPiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file3.js');">MellowOrgan</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file4.js');">MuckWeedsOrgan</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file5.js');">NoisePiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file6.js');">PantryPassion</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file7.js');">PetalsPiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file8.js');">PlasticWobbler</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file9.js');">ResonancePiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file10.js');">ResOrgan</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file11.js');">RogerPiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file12.js');">SwishyPiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file13.js');">VladPiano</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file14.js');">WobbleKeyz</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Keys/file15.js');">WobblePiano</p>

<p>FX</p>	
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file3.js');">DeadGrape</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file4.js');">DiveBummer</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file5.js');">facialExercise</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file6.js');">FlyDown</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file7.js');">LongerGrape</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file8.js');">QuiteTantrum</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file9.js');">Res</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file10.js');">SexySynthesizer</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file11.js');">SwishLFO</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file12.js');">Vel4SH110</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file13.js');">Whinger</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/FX/file14.js');">OrganicHell</p>

						<p>Bass</p>	
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file1.js');">4Bass</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file2.js');">NoisyBass</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file3.js');">RandomBass90</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file4.js');">RockSchoolBass</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file5.js');">Solids</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file6.js');">Squarenerds</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file7.js');">SquidgyBlack</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file8.js');">Submissive</p>
						<p onclick="move(); stop(); loadJS('../presets/jp4/Bass/file9.js');">WibbleBass</p>
						
							</div>
						</div>
					</div>
					<div class="grid-item2">
						<div id="myProgress">
							<div id="myBar"></div>
						</div>
					</div>
				</div>
				<script>
				    var i = 0;
				    function move() {
				      if (i == 0) {
				        i = 1;
				        var elem = document.getElementById("myBar");
				        var width = 1;
				        var id = setInterval(frame, 10);
				        function frame() {
				          if (width >= 100) {
				            clearInterval(id);
				            i = 0;
				          } else {
				            width++;
				            elem.style.width = width + "%";
				          }
				        }
				      }
				    }
				</script> 
			</div>
		</div>
<p>Use your keyboard, MIDI device (Chrome only) or the sequencer below to play the sounds on this page. Select a different sample by clicking on the Patch button above.</p>
	
			

				<table>
					<tbody>
						<tr>
						
							<td class="text-align-center">BPM</td>
							<td class="text-align-center">Vol</td>
							<td class="text-align-center">Attk</td>
							<td class="text-align-center">Rel</td>
							<td class="text-align-center">Chorus</td>
							<td class="text-align-center">Speed</td>
							<td class="text-align-center">Delay</td>
							<td class="text-align-center">Time</td>
							<td class="text-align-center">Reverb</td>
						</tr>
						<tr>
							
						<td>
						<div class="text-align-center" id="tempo"></div>
						</td>
						<td>
						<div class="text-align-center" id="vol"></div>
						</td>
						<td>
						<div class="text-align-center" id="attack"></div>
						</td>
						<td>
						<div class="text-align-center" id="release"></div>
						</td>
						<td>
							<div class="text-align-center" id="cwet"></div>
						</td>
						<td>
							<div class="text-align-center" id="cfreq"></div>
						</td>
						<td>
							<div class="text-align-center" id="dwet"></div>
						</td>
						<td>
							<div class="text-align-center" id="dtime"></div>
						</td>
						<td>
							<div class="text-align-center" id="rwet"></div>
						</td>
						</tr>
					</tbody>
				</table>
	<div class="number-grid">

			
				<div class="gnum">1</div>
				<div class="gnum">2</div>
				<div class="gnum">3</div>
				<div class="gnum">4</div>
				<div class="gnum">5</div>
				<div class="gnum">6</div>
				<div class="gnum">7</div>
				<div class="gnum">8</div>
				<div class="gnum">9</div>
				<div class="gnum">10</div>
				<div class="gnum">11</div>
				<div class="gnum">12</div>
				<div class="gnum">13</div>
				<div class="gnum">14</div>
				<div class="gnum">15</div>
				<div class="gnum">16</div>
		</div>

	
	<tone-step-sequencer id="seq1"></tone-step-sequencer>
	
						<table>
							<tbody>
								<tr>
						<td><tone-play-toggle>Play</tone-play-toggle></td>
						<td><a href="https://github.com/publicsamples">Back to Github</a> - <a href="https://gum.co/modularsamples-drives">Get on SSD</a> - <a href="https://patreon.com/modularsamples">Patreon</a></td>
	
							</tr>
						</tbody>
					</table>
					</div>
					
			
					
						<script type="text/javascript">

						  function loadJS(file) {
						  // DOM: Create the script element
						  var jsElm = document.createElement("script");
						  // set the type attribute
						  jsElm.type = "application/javascript";
						  // make the script element load file
						  jsElm.src = file;
						  // finally insert the element to the body element in order to load the script
						  document.body.appendChild(jsElm);
						  }



						  var midi = {};

						  WebMidi.enable(function (err) {

						      if (err) {
						        console.log("WebMidi could not be enabled.", err);
						        return;
						      } else {
						        console.log("WebMidi enabled!");
						        console.log(WebMidi.inputs);
						           console.log(WebMidi.outputs);
						      }

						      WebMidi.inputs.forEach((o) => {
						        console.log(o.name)

						      o.addListener('noteon', "all", function (e) {
						 
						        console.log(e)

						          let octave = parseInt(e.note.octave);
						          let note = e.note.name + octave;
						        console.log(note)

						          if (!(note in midi)) {
						     
						              console.log(keys)
						              keys.triggerAttack(note, Tone.context.currentTime + 0.01, e.velocity);
						              midi[note] = keys;
						          }
						      });

						          o.addListener('noteoff', "all", function (e) {
						              let octave = parseInt(e.note.octave);
						              let note = e.note.name + octave;
						              let keys = midi[note];

						              if (keys) {
						                  keys.triggerRelease(note, undefined, e.velocity);
						                  delete midi[note];
						              }
						          });
						      });

						  });




						  //////////////////////////

						  var eq = new Tone.Volume({
						      "volume" : -12

						  }).toMaster({
						  })

						  var verb = new Tone.Freeverb({
						  "wet" : 0.0
						  }).connect(eq);    

						  //the feedback delay
						  var feedbackDelay = new Tone.PingPongDelay({
						  "wet" : 0.0
						  }).connect(verb);        

						  var chorus = new Tone.Chorus({
						      "wet" : 0.0
						  }).connect(feedbackDelay);        


						  var filter = new Tone.AutoFilter({
						      "wet" : 0.0
						  }).connect(chorus).start();        


						  //the notes
						  var noteNames = ["B3", "A#3", "A3", "G#3", "G3", "F#3", "F3", "E3","D#3", "D3", "C#3", "C3", "B2", "A#2", "A2", "G#2","G2", "F#2", "F2", "E2","D#2", "D2", "C#2", "C2"  ];






						  var loop = new Tone.Sequence(function(time, col){
						  var column = document.querySelector("#seq1").currentColumn;
						  column.forEach(function(val, i){
						  if (val){

						  //slightly randomized velocities
						  keys.triggerAttackRelease(noteNames[i], "0.25", time);
						  }
						  });

						  Tone.Transport.start("+0.2");
						  //set the columne on the correct draw frame
						  Tone.Draw.schedule(function(){
						  document.querySelector("#seq1").setAttribute("highlight", col);
						  }, time);
						  }, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], "16n").start(0);


						  function stop() {
						  Tone.Transport.stop();
						  keys.disconnect();
						  keys.dispose();
						  }



						  Nexus.colors.accent = "#806f14"
						  Nexus.colors.fill = "#ecd7a2"


						  //aENV Controls
						  var attack = new Nexus.Dial('#attack', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.01,
						  'max': 10.00,
						  'step': 0,
						  'value': 0
						  })

						  attack.on('change', function(v) {
						  keys.attack = v;
						  });


						  var release = new Nexus.Dial('#release', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.01,
						  'max': 10.00,
						  'step': 0,
						  'value': 0
						  })

						  release.on('change', function(v) {
						  keys.release = v;
						  });



						  //chorus Controls

						  var cwet = new Nexus.Dial('#cwet', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.0,
						  'max': 0.5,
						  'step': 0,
						  'value': 0
						  })

						  cwet.on('change', function(v) {
						  chorus.wet.value = v;
						  });


						  var cfreq = new Nexus.Dial('#cfreq', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.1,
						  'max': 2.0,
						  'step': 0,
						  'value': 0.60
						  })

						  cfreq.on('change', function(v) {
						  chorus.frequency.value = v;
						  });

						  //delay Controls

						  var dwet = new Nexus.Dial('#dwet', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.0,
						  'max': 0.7,
						  'step': 0,
						  'value': 0
						  })

						  dwet.on('change', function(v) {
						  feedbackDelay.wet.value = v;
						  });

						  var dtime = new Nexus.Dial('#dtime', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.01,
						  'max': 1.0,
						  'step': 0,
						  'value': 0.25
						  })

						  dtime.on('change', function(v) {
						  feedbackDelay.delayTime.value = v;
						  });


						  //Reverb Controls

						  var rwet = new Nexus.Dial('#rwet', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 0.0,
						  'max': 0.7,
						  'step': 0,
						  'value': 0
						  })

						  rwet.on('change', function(v) {
						  verb.wet.value = v;
						  });


						  //Transport/seq Controls

						  var vol = new Nexus.Dial('#vol', {size: [30, 30], min: -36, max: 12,  value: -12});
						  vol.on('change', v => eq.volume.value = v)


						  var tempo = new Nexus.Dial('#tempo', {
						  'mode': 'relative', // "absolute" or "absolute"
						  'size': [30, 30],
						  'min': 60,
						  'max': 240,
						  'step': 0,
						  'value': 120
						  })

						  tempo.on('change', function(v) {
						  Tone.Transport.bpm.value = v;
						  });



						  document.querySelector("tone-play-toggle").bind(Tone.Transport);
						  Tone.Transport.on("stop", () => {
						  setTimeout(() => {
						  document.querySelector("#seq1").setAttribute("highlight", "-1");

						  }, 100);

						  });
						         
						  //keys


						  var keyboard = new AudioKeys(
						      {
						          rootNote: 36
						  
						      }
						  );

						  Tone.context.currentTime + 0.01

						  keyboard.down(function(note) {
						  keys.triggerAttack(Tone.Frequency(note.note, "midi").toNote());
						  });

						  keyboard.up(function(note) {
						  keys.triggerRelease(Tone.Frequency(note.note, "midi").toNote());
						  });

						  // Enable WebMidi.js




						</script>

</body>
</html>